function showCouponMessage(e,n){let o=document.getElementById("coupon-message");o||(o=document.createElement("div"),o.id="coupon-message",document.querySelector(".coupon-container").after(o)),o.textContent=e,o.className=`coupon-message ${n}`,setTimeout((()=>{o.textContent="",o.className="coupon-message"}),3e3)}const validCoupons={SAVE10:{discount:.1,type:"percentage",minPurchase:50,expires:"2025-12-31",description:"10% off (min $50 purchase)"},SAVE20:{discount:.2,type:"percentage",minPurchase:100,expires:"2025-12-31",description:"20% off (min $100 purchase)"},FREESHIP:{discount:4.99,type:"shipping",expires:"2025-12-31",description:"Free standard shipping"},FIFTEEN:{discount:15,type:"fixed",minPurchase:75,expires:"2023-12-31",description:"$15 off (min $75 purchase)"}};function applyCoupon(){const e=document.getElementById("coupon-code").value.trim().toUpperCase(),n=validCoupons[e],o=JSON.parse(localStorage.getItem("cart"))||[],t=o.reduce(((e,n)=>e+n.price*n.quantity),0);if(n)if(0!==o.length)if(n.expires&&new Date>new Date(n.expires))showCouponMessage("This coupon has expired","error");else if(n.minPurchase&&t<n.minPurchase){const e=(n.minPurchase-t).toFixed(2);showCouponMessage(`Minimum purchase of $${n.minPurchase} required (add $${e} more)`,"error")}else applyDiscount(n),showCouponMessage(`Coupon applied: ${n.description}`,"success"),document.getElementById("coupon-code").value="";else showCouponMessage("Your cart is empty","error");else showCouponMessage("Invalid coupon code","error")}function applyDiscount(e){localStorage.setItem("appliedCoupon",JSON.stringify(e)),updateSummary()}function createDiscountElement(){const e=document.querySelector(".secondPart .card"),n=document.createElement("div");return n.className="d-flex justify-content-between mb-2",n.innerHTML='\n      <span>Discount</span>\n      <span id="discount" style="color: green; display: none;"></span>\n    ',e.querySelector(".d-flex.justify-content-between.mb-2:nth-child(3)").before(n),document.getElementById("discount")}document.getElementById("apply-coupon").addEventListener("click",applyCoupon);