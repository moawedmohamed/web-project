{"version":3,"file":"js/filter.ed686913.js","mappings":"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","sources":["webpack://project/./src/js/filter.js"],"sourcesContent":["// import \"../css/filter.css\"\r\nlet allProducts = [];\r\n\r\nasync function fetchAndDisplayProducts() {\r\n  try {\r\n    const response = await fetch(\"https://fakestoreapi.com/products\");\r\n    if (!response.ok) throw new Error(`Failed to fetch: ${response.status}`);\r\n\r\n    allProducts = await response.json();\r\n\r\n    const categories = getUniqueCategories(allProducts);\r\n    createFilterSwiper(categories);\r\n\r\n    // Display all products by default\r\n    displayProducts(allProducts);\r\n  } catch (error) {\r\n    console.error(\"Error:\", error);\r\n    document.getElementById(\r\n      \"product-list\"\r\n    ).innerHTML = `<p class=\"product-error\">Failed to load products. Refresh the page.</p>`;\r\n  }\r\n}\r\n\r\nfunction getUniqueCategories(products) {\r\n  const categorySet = new Set(products.map((p) => p.category));\r\n  return [\"all\", ...categorySet];\r\n}\r\n\r\nfunction createFilterSwiper(categories) {\r\n  const container = document.getElementById(\"filter-buttons\");\r\n  container.innerHTML = `\r\n    <div class=\"filter-swiper\">\r\n      <div class=\"swiper-wrapper\"></div>\r\n    </div>\r\n  `;\r\n\r\n  const wrapper = container.querySelector(\".swiper-wrapper\");\r\n\r\n  categories.forEach((category, index) => {\r\n    const slide = document.createElement(\"div\");\r\n    slide.className = \"swiper-slide\";\r\n    slide.innerHTML = `\r\n      <button class=\"filter-btn${index === 0 ? \" active\" : \"\"}\">\r\n        ${category[0].toUpperCase() + category.slice(1)}\r\n      </button>\r\n    `;\r\n\r\n    const button = slide.querySelector(\"button\");\r\n    button.onclick = () => {\r\n      const allButtons = container.querySelectorAll(\".filter-btn\");\r\n      allButtons.forEach((btn) => btn.classList.remove(\"active\"));\r\n      button.classList.add(\"active\");\r\n      filterByCategory(category);\r\n    };\r\n\r\n    wrapper.appendChild(slide);\r\n  });\r\n\r\n  setTimeout(() => {\r\n    new Swiper(\".filter-swiper\", {\r\n      slidesPerView: \"auto\",\r\n      spaceBetween: 15,\r\n      centeredSlides: true,\r\n      loop: false,\r\n    });\r\n  }, 100);\r\n}\r\nfunction filterByCategory(category) {\r\n  const filtered =\r\n    category === \"all\"\r\n      ? allProducts\r\n      : allProducts.filter((p) => p.category === category);\r\n  displayProducts(filtered);\r\n}\r\nfunction displayProducts(products) {\r\n  const container = document.getElementById(\"product-list\");\r\n  container.classList.add(\"fade-out\");\r\n\r\n  setTimeout(() => {\r\n    container.innerHTML = \"\";\r\n\r\n    if (products.length === 0) {\r\n      container.innerHTML = `<p class=\"product-error\">No products found in this category.</p>`;\r\n    } else {\r\n      const cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n\r\n      products.forEach((product) => {\r\n        const isInCart = cart.some((item) => item.id === product.id);\r\n        const productCard = createProductCard(product, isInCart);\r\n        container.appendChild(productCard);\r\n\r\n        const cartBtn = productCard.querySelector(\".btn-cart\");\r\n        if (product.rating.count > 0) {\r\n          cartBtn.addEventListener(\"click\", () => {\r\n            if (!isInCart) {\r\n              addToCart(product);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    container.classList.remove(\"fade-out\");\r\n  }, 300);\r\n}\r\n\r\nfunction createProductCard(product, isInCart) {\r\n  const card = document.createElement(\"div\");\r\n  card.className = \"card-product\";\r\n\r\n  card.innerHTML = `\r\n<a href=\"product-details.html?id=${product.id}\" style=\"display: inline-block;\">\r\n  <img class=\"product-img\" src=\"${product.image}\" alt=\"${product.title}\" />\r\n</a>    <h3 class=\"product-title\">${product.title\r\n    .split(\" \")\r\n    .slice(0, 4)\r\n    .join(\" \")}</h3>\r\n    <div class=\"product-info\">\r\n      <p class=\"product-price\">$${product.price.toFixed(2)}</p>\r\n      <div class=\"product-rating\">\r\n        ${generateStarsSVG(product.rating.rate)} (${product.rating.count})\r\n      </div>\r\n      <button class=\"btn-cart\" ${product.rating.count === 0 ? \"disabled\" : \"\"} \r\n              data-id=\"${product.id}\" ${isInCart ? \"disabled\" : \"\"}>\r\n        <span class=\"btn-cart-icon\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"icon-bag\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"/>\r\n          </svg>\r\n        </span>\r\n        ${\r\n          product.rating.count === 0\r\n            ? \"Unavailable\"\r\n            : isInCart\r\n            ? \"Added to Cart\"\r\n            : \"Add to Cart\"\r\n        }\r\n      </button>\r\n    </div>\r\n  `;\r\n\r\n  return card;\r\n}\r\nfunction updateCartCount() {\r\n  const cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n  const totalItems = cart.reduce((total, item) => total + item.quantity, 0);\r\n\r\n  const cartCountElement = document.getElementById(\"cart-count\");\r\n  if (cartCountElement) {\r\n    cartCountElement.textContent = totalItems;\r\n    cartCountElement.style.display = totalItems > 0 ? \"block\" : \"none\";\r\n  }\r\n}\r\n\r\nfunction addToCart(product) {\r\n  let cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n  const existingItem = cart.find((item) => item.id === product.id);\r\n\r\n  if (existingItem) {\r\n    existingItem.quantity += 1;\r\n  } else {\r\n    cart.push({\r\n      ...product,\r\n      quantity: 1,\r\n    });\r\n  }\r\n\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  updateButtonState(product.id, true);\r\n  updateCartCount();\r\n}\r\n\r\nfunction addRemoveListeners() {\r\n  document.querySelectorAll(\".remove-item\").forEach((btn) => {\r\n    btn.addEventListener(\"click\", () => {\r\n      const cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n      const index = btn.dataset.index;\r\n      const removedProduct = cart[index];\r\n\r\n      cart.splice(index, 1);\r\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n\r\n      // Reset the \"Add to Cart\" button for this product\r\n      updateButtonState(removedProduct.id, false);\r\n\r\n      displayCartItems();\r\n    });\r\n  });\r\n}\r\n\r\nfunction updateButtonState(productId, added) {\r\n  const buttons = document.querySelectorAll(\r\n    `.btn-cart[data-id=\"${productId}\"]`\r\n  );\r\n  buttons.forEach((button) => {\r\n    button.textContent = added ? \"Added to Cart\" : \"Add to Cart\";\r\n    button.disabled = added;\r\n    if (!added) {\r\n      button.removeAttribute(\"disabled\");\r\n    }\r\n  });\r\n}\r\n\r\nfunction generateStarsSVG(rate) {\r\n  const fullStars = Math.floor(rate);\r\n  const hasHalfStar = rate % 1 >= 0.5;\r\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\r\n\r\n  let starsHTML = \"\";\r\n  for (let i = 0; i < fullStars; i++) {\r\n    starsHTML += `<svg class=\"star-icon full-star\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z\"/></svg>`;\r\n  }\r\n\r\n  if (hasHalfStar) {\r\n    starsHTML += `<svg class=\"star-icon half-star\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><defs><linearGradient id=\"half\"><stop offset=\"50%\" stop-color=\"currentColor\"/><stop offset=\"50%\" stop-color=\"transparent\"/></linearGradient></defs><path fill=\"url(#half)\" d=\"M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z\"/></svg>`;\r\n  }\r\n\r\n  for (let i = 0; i < emptyStars; i++) {\r\n    starsHTML += `<svg class=\"star-icon empty-star\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"><path stroke-width=\"2\" d=\"M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z\"/></svg>`;\r\n  }\r\n\r\n  return starsHTML;\r\n}\r\n\r\n// Initialize the page\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  fetchAndDisplayProducts();\r\n  updateCartCount();\r\n});\r\n"],"names":["allProducts","displayProducts","products","container","document","getElementById","classList","add","setTimeout","innerHTML","length","cart","JSON","parse","localStorage","getItem","forEach","product","isInCart","some","item","id","productCard","card","createElement","className","image","title","split","slice","join","price","toFixed","rate","fullStars","Math","floor","hasHalfStar","emptyStars","starsHTML","i","generateStarsSVG","rating","count","createProductCard","appendChild","cartBtn","querySelector","addEventListener","existingItem","find","productId","added","quantity","push","setItem","stringify","querySelectorAll","button","textContent","disabled","removeAttribute","updateCartCount","addToCart","remove","totalItems","reduce","total","cartCountElement","style","display","window","async","response","fetch","ok","Error","status","json","categories","wrapper","category","index","slide","toUpperCase","onclick","btn","filter","p","filterByCategory","Swiper","slidesPerView","spaceBetween","centeredSlides","loop","createFilterSwiper","Set","map","error","console","fetchAndDisplayProducts"],"sourceRoot":""}