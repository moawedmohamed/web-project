async function fetchAndDisplayProducts(){try{const t=await fetch("https://fakestoreapi.com/products");if(!t.ok)throw new Error(`Failed to fetch: ${t.status}`);const e=await t.json(),a=document.getElementById("products-container");a.innerHTML="",e.slice(0,4).forEach(((t,e)=>{const r=document.createElement("div");r.className="product-card";let s="",o="",n=!1;0===e?(s="New",o="badge-blue"):1===e?(s="Sale",o="badge-red"):2===e&&(s="Sold Out",o="badge-gray",n=!0),r.innerHTML=`\n        <div class="icon-overlay">\n          <i class="fa-regular fa-thumbs-up icon heart"></i>\n          <i class="fa-regular fa-eye icon eye"></i>\n        </div>\n        ${s?`<div class="badge ${o}">${s}</div>`:""}\n              <a href="product-details.html?id=${t.id}">\n              <img style="width: 400px;" src="${t.image}" alt="${t.title}" loading="lazy">\n              </a>\n     <h3>${t.title.split(" ").slice(0,4).join(" ")}</h3>\n        <p class="price">$${t.price.toFixed(2)}</p>\n        <div class="rating">${generateStarsSVG(t.rating.rate)} (${t.rating.count})</div>\n        <button class="add-to-cart" ${n?"disabled":""}>\n          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" style="width: 18px; height: 18px;">\n            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />\n          </svg>\n          ${n?"Sold Out":"Add to Cart"}\n        </button>\n      `,console.log(t),a.appendChild(r);const l=r.querySelector(".heart");l.addEventListener("click",(()=>{l.classList.toggle("fa-regular"),l.classList.toggle("fa-solid"),l.classList.toggle("liked")}));const i=r.querySelector(".add-to-cart");i.addEventListener("click",(()=>{if(n)return;const e=JSON.parse(localStorage.getItem("cart"))||[];e.find((e=>e.id===t.id))||(e.push({...t,quantity:1}),localStorage.setItem("cart",JSON.stringify(e)),i.textContent="Added",i.disabled=!0,i.classList.add("added"))}))}))}catch(t){console.error("Error:",t),document.getElementById("products-container").innerHTML='\n        <p class="error">Failed to load products. Refresh the page.</p>\n      '}}function generateStarsSVG(t){const e=Math.floor(t),a=t%1>=.5,r=5-e-(a?1:0);let s="";for(let t=0;t<e;t++)s+='<svg class="star-icon full-star" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z"/></svg>';a&&(s+='<svg class="star-icon half-star" viewBox="0 0 24 24" fill="currentColor"><defs><linearGradient id="half"><stop offset="50%" stop-color="currentColor"/><stop offset="50%" stop-color="transparent"/></linearGradient></defs><path fill="url(#half)" d="M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z"/></svg>');for(let t=0;t<r;t++)s+='<svg class="star-icon empty-star" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z"/></svg>';return s}window.addEventListener("DOMContentLoaded",fetchAndDisplayProducts);