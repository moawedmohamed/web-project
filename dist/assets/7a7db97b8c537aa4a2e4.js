window.addEventListener("DOMContentLoaded",(()=>{displayCartItems(),document.getElementById("shipping").addEventListener("change",updateSummary),document.getElementById("clear-cart").addEventListener("click",clearCart)}));const cartSection=document.querySelector(".firstPart");cartSection.style.height="auto";const newHeight=cartSection.scrollHeight+"px";function displayCartItems(){const t=JSON.parse(localStorage.getItem("cart"))||[],e=document.getElementById("cart-container");if(e.innerHTML="",0===t.length)return e.innerHTML="<p>Your cart is empty.</p>",void updateSummary();t.forEach(((t,n)=>{const o=(t.price*t.quantity).toFixed(2),a=document.createElement("div");a.className="d-flex align-items-center justify-content-between py-4 mb-3 product-holder",a.innerHTML=`\n              <div class="d-flex align-items-center product-info" style="width: 40%">\n                    <img style="width:70px;height:90px" src="${t.image}" alt="${t.title}" class="me-3" />\n                    <div>\n                        <h6 class="mb-1">${t.title.split(" ").slice(0,3).join(" ")}</h6>\n                        <p class="mb-1 text-muted">$${t.price.toFixed(2)}</p>\n                    </div>\n                </div>\n                <div class="quantity-controls" style="width: 30%">\n                    <div class="d-flex justify-content-center align-items-center gap-2 shadow-sm rounded-pill add-quantity">\n                        <button class="btn btn-sm fw-bold decrease" data-index="${n}">-</button>\n                        <span class="px-2 fw-semibold">${t.quantity}</span>\n                        <button class="btn btn-sm fw-bold increase" data-index="${n}">+</button>\n                    </div>\n                </div>\n                <div class="d-flex align-items-center justify-content-end product-actions" style="width: 30%">\n                    <div class="fw-bold me-3">$${o}</div>\n                    <button class="btn btn-sm remove-item remove-gray" data-index="${n}">\n                        <i class="fa fa-trash"></i> Remove\n                    </button>\n                </div>\n`,e.appendChild(a)})),addQuantityListeners(),addRemoveListeners(),updateSummary()}function addQuantityListeners(){document.querySelectorAll(".increase").forEach((t=>{t.addEventListener("click",(()=>{const e=JSON.parse(localStorage.getItem("cart"))||[];e[t.dataset.index].quantity++,localStorage.setItem("cart",JSON.stringify(e)),displayCartItems()}))})),document.querySelectorAll(".decrease").forEach((t=>{t.addEventListener("click",(()=>{const e=JSON.parse(localStorage.getItem("cart"))||[],n=t.dataset.index;e[n].quantity>1&&(e[n].quantity--,localStorage.setItem("cart",JSON.stringify(e)),displayCartItems())}))}))}function addRemoveListeners(){document.querySelectorAll(".remove-item").forEach((t=>{t.addEventListener("click",(()=>{const e=JSON.parse(localStorage.getItem("cart"))||[],n=t.dataset.index;e.splice(n,1),localStorage.setItem("cart",JSON.stringify(e)),displayCartItems()}))}))}function updateSummary(){const t=(JSON.parse(localStorage.getItem("cart"))||[]).reduce(((t,e)=>t+e.price*e.quantity),0),e=.1*t,n=t+e+parseFloat(document.getElementById("shipping").value);document.getElementById("subtotal").textContent=`$${t.toFixed(2)}`,document.getElementById("tax").textContent=`$${e.toFixed(2)}`,document.getElementById("total").textContent=`$${n.toFixed(2)}`}function clearCart(){localStorage.removeItem("cart"),localStorage.removeItem("appliedCoupon"),displayCartItems(),showCouponMessage("Cart has been cleared","success")}function showCouponMessage(t,e){let n=document.getElementById("coupon-message");n||(n=document.createElement("div"),n.id="coupon-message",document.querySelector(".coupon-container").after(n)),n.textContent=t,n.className=`coupon-message ${e}`,setTimeout((()=>{n.textContent="",n.className="coupon-message"}),3e3)}cartSection.style.height=newHeight;let cartCount=localStorage.getItem("cartCount")?parseInt(localStorage.getItem("cartCount")):0,wishlistCount=localStorage.getItem("wishlistCount")?parseInt(localStorage.getItem("wishlistCount")):0;const cartCountElement=document.getElementById("cart-count"),wishlistCountElement=document.getElementById("wishlist-count");function updateCartCount(t){cartCount+=t,cartCount<0&&(cartCount=0),cartCountElement.textContent=cartCount,localStorage.setItem("cartCount",cartCount)}function updateWishlistCount(t){wishlistCount+=t,wishlistCount<0&&(wishlistCount=0),wishlistCountElement.textContent=wishlistCount,localStorage.setItem("wishlistCount",wishlistCount)}cartCountElement.textContent=cartCount,wishlistCountElement.textContent=wishlistCount;const style=document.createElement("style");style.textContent="\n\n.product-holder {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border: 1px solid #d7d7d7;\n    border-radius: 10px;\n    padding: 20px;\n    margin-bottom: 10px;\n}\n\n.product-info, .quantity-controls, .product-actions {\n    display: flex;\n    align-items: center;\n}\n\n.quantity-controls {\n    justify-content: center;\n}\n\n.product-actions {\n    justify-content: flex-end;\n}\n.remove-gray {\n  color: gray;\n  transition: color 0.3s ease;\n}\n\n.remove-gray:hover {\n  color: #dc3545;\n}\n\n.product-holder:hover {\n  border: 1px solid #a5a5e2;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.product-holder{\n    border:1px solid #d7d7d7;\n    border-radius:10px;\n    padding: 20px ;\n    margin-button:10px;\n\n}\n.add-quantity{\n    background-color: white;\n    border-radius:50%;\n    border: 1px solid #7777;\n    padding-right:5px;\n    padding-top:3px;\n    padding-bottom:3px;\n}\n\n",document.head.appendChild(style);