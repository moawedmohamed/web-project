{"version":3,"file":"js/coupon.596ab885.js","mappings":"8EAEA,SAASA,EAAkBC,EAASC,GAClC,IAAIC,EAAiBC,SAASC,eAAe,kBAExCF,IACHA,EAAiBC,SAASE,cAAc,OACxCH,EAAeI,GAAK,iBACpBH,SAASI,cAAc,qBAAqBC,MAAMN,IAGpDA,EAAeO,YAAcT,EAC7BE,EAAeQ,UAAY,kBAAkBT,IAE7CU,YAAW,KACTT,EAAeO,YAAc,GAC7BP,EAAeQ,UAAY,gBAAgB,GAC1C,IACL,CAEA,MAAME,EAAe,CACnBC,OAAQ,CACNC,SAAU,GACVb,KAAM,aACNc,YAAa,GACbC,QAAS,aACTC,YAAa,8BAEfC,OAAQ,CACNJ,SAAU,GACVb,KAAM,aACNc,YAAa,IACbC,QAAS,aACTC,YAAa,+BAEfE,SAAU,CACRL,SAAU,KACVb,KAAM,WACNe,QAAS,aACTC,YAAa,0BAEfG,QAAS,CACPN,SAAU,GACVb,KAAM,QACNc,YAAa,GACbC,QAAS,aACTC,YAAa,+BAIjBd,SAASC,eAAe,gBAAgBiB,iBAAiB,SAEzD,WACE,MAAMC,EAAanB,SAChBC,eAAe,eACfmB,MAAMC,OACNC,cACGC,EAASd,EAAaU,GACtBK,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,UAAY,GACnDC,EAAWL,EAAKM,QACpB,CAACC,EAAKC,IAASD,EAAMC,EAAKC,MAAQD,EAAKE,UACvC,GAGF,GAAKX,EAKL,GAAoB,IAAhBC,EAAKW,OAKT,GAAIZ,EAAOV,SAAW,IAAIuB,KAAS,IAAIA,KAAKb,EAAOV,SACjDjB,EAAkB,0BAA2B,cAI/C,GAAI2B,EAAOX,aAAeiB,EAAWN,EAAOX,YAA5C,CACE,MAAMyB,GAAUd,EAAOX,YAAciB,GAAUS,QAAQ,GACvD1C,EACE,wBAAwB2B,EAAOX,8BAA8ByB,UAC7D,QAGJ,MAOF,SAAuBd,GACrBI,aAAaY,QAAQ,gBAAiBd,KAAKe,UAAUjB,IACrDkB,eACF,EAREC,CAAcnB,GACd3B,EAAkB,mBAAmB2B,EAAOT,cAAe,WAC3Dd,SAASC,eAAe,eAAemB,MAAQ,QApB7CxB,EAAkB,qBAAsB,cALxCA,EAAkB,sBAAuB,QA0B7C,G","sources":["webpack://project/./src/js/coupon.js"],"sourcesContent":["// Define valid coupons\r\n// import \"../css/coupon.css\"\r\nfunction showCouponMessage(message, type) {\r\n  let messageElement = document.getElementById(\"coupon-message\");\r\n\r\n  if (!messageElement) {\r\n    messageElement = document.createElement(\"div\");\r\n    messageElement.id = \"coupon-message\";\r\n    document.querySelector(\".coupon-container\").after(messageElement);\r\n  }\r\n\r\n  messageElement.textContent = message;\r\n  messageElement.className = `coupon-message ${type}`;\r\n\r\n  setTimeout(() => {\r\n    messageElement.textContent = \"\";\r\n    messageElement.className = \"coupon-message\";\r\n  }, 3000);\r\n}\r\n\r\nconst validCoupons = {\r\n  SAVE10: {\r\n    discount: 0.1,\r\n    type: \"percentage\",\r\n    minPurchase: 50,\r\n    expires: \"2025-12-31\",\r\n    description: \"10% off (min $50 purchase)\",\r\n  },\r\n  SAVE20: {\r\n    discount: 0.2,\r\n    type: \"percentage\",\r\n    minPurchase: 100,\r\n    expires: \"2025-12-31\",\r\n    description: \"20% off (min $100 purchase)\",\r\n  },\r\n  FREESHIP: {\r\n    discount: 4.99,\r\n    type: \"shipping\",\r\n    expires: \"2025-12-31\",\r\n    description: \"Free standard shipping\",\r\n  },\r\n  FIFTEEN: {\r\n    discount: 15,\r\n    type: \"fixed\",\r\n    minPurchase: 75,\r\n    expires: \"2023-12-31\",\r\n    description: \"$15 off (min $75 purchase)\",\r\n  },\r\n};\r\n\r\ndocument.getElementById(\"apply-coupon\").addEventListener(\"click\", applyCoupon);\r\n\r\nfunction applyCoupon() {\r\n  const couponCode = document\r\n    .getElementById(\"coupon-code\")\r\n    .value.trim()\r\n    .toUpperCase();\r\n  const coupon = validCoupons[couponCode];\r\n  const cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n  const subtotal = cart.reduce(\r\n    (acc, item) => acc + item.price * item.quantity,\r\n    0\r\n  );\r\n\r\n  if (!coupon) {\r\n    showCouponMessage(\"Invalid coupon code\", \"error\");\r\n    return;\r\n  }\r\n\r\n  if (cart.length === 0) {\r\n    showCouponMessage(\"Your cart is empty\", \"error\");\r\n    return;\r\n  }\r\n\r\n  if (coupon.expires && new Date() > new Date(coupon.expires)) {\r\n    showCouponMessage(\"This coupon has expired\", \"error\");\r\n    return;\r\n  }\r\n\r\n  if (coupon.minPurchase && subtotal < coupon.minPurchase) {\r\n    const needed = (coupon.minPurchase - subtotal).toFixed(2);\r\n    showCouponMessage(\r\n      `Minimum purchase of $${coupon.minPurchase} required (add $${needed} more)`,\r\n      \"error\"\r\n    );\r\n    return;\r\n  }\r\n\r\n  applyDiscount(coupon);\r\n  showCouponMessage(`Coupon applied: ${coupon.description}`, \"success\");\r\n  document.getElementById(\"coupon-code\").value = \"\";\r\n}\r\n\r\nfunction applyDiscount(coupon) {\r\n  localStorage.setItem(\"appliedCoupon\", JSON.stringify(coupon));\r\n  updateSummary();\r\n}\r\n\r\nfunction createDiscountElement() {\r\n  const summaryCard = document.querySelector(\".secondPart .card\");\r\n  const discountDiv = document.createElement(\"div\");\r\n  discountDiv.className = \"d-flex justify-content-between mb-2\";\r\n  discountDiv.innerHTML = `\r\n      <span>Discount</span>\r\n      <span id=\"discount\" style=\"color: green; display: none;\"></span>\r\n    `;\r\n  summaryCard\r\n    .querySelector(\".d-flex.justify-content-between.mb-2:nth-child(3)\")\r\n    .before(discountDiv);\r\n  return document.getElementById(\"discount\");\r\n}\r\n"],"names":["showCouponMessage","message","type","messageElement","document","getElementById","createElement","id","querySelector","after","textContent","className","setTimeout","validCoupons","SAVE10","discount","minPurchase","expires","description","SAVE20","FREESHIP","FIFTEEN","addEventListener","couponCode","value","trim","toUpperCase","coupon","cart","JSON","parse","localStorage","getItem","subtotal","reduce","acc","item","price","quantity","length","Date","needed","toFixed","setItem","stringify","updateSummary","applyDiscount"],"sourceRoot":""}